name: ejson

packages:
  - packages/*

ide:
  intellij: false

scripts:
  qa:
    description: Run all QA scripts.
    run: |
      melos run format:check &&
      melos analyze &&
      melos test

  format:
    description: Format Dart code.
    run: dart format .

  format:check:
    description: Check formatting of Dart code.
    run: dart format --output none --set-exit-if-changed .

  analyze:
    description: Analyze Dart code.
    run: dart analyze . --fatal-infos

  test:
    description: Run tests in a specific package.
    run: dart test -j1 --chain-stack-traces
    exec:
      concurrency: 1
    packageFilters:
      dirExists:
        - test